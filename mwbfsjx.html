<!DOCTYPE html>
<html lang="ko">
<link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-square-round.css" rel="stylesheet">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìš°ë¦¬ ì•„ê¸° ì  ë” ë¦¬ë¹Œ</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #eeeeee;
            font-family: 'NanumSquareRound';
            overflow: hidden;
            transition: background-color 1s ease;

            /* í„°ì¹˜ í™•ëŒ€ ë° ì„ íƒ ë°©ì§€ */
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
        }

        .instruction {
            color: #666;
            font-size: 1.5rem;
            font-weight: bold;
            pointer-events: none; /* í…ìŠ¤íŠ¸ í´ë¦­ ë°©ì§€ */
        }

        .reveal-container {
            position: relative;
            width: 300px;
            height: 400px;
            display: flex;
            justify-content: center;
        }

        .balloon-wrapper {
            position: absolute;
            cursor: pointer;
            transition: transform 0.1s ease-out;
            z-index: 10;
            -webkit-tap-highlight-color: transparent;
            top: 30px;
        }

        .balloon {
            width: 140px;
            height: 170px;
            background-color: #fff9c4;
            border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
            position: relative;
            box-shadow: inset -10px -10px 0 rgba(0, 0, 0, 0.05);
        }

        .balloon::after {
            content: "";
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 15px solid #fff9c4;
        }

        .string {
            width: 2px;
            height: 160px;
            background-color: #bbb;
            position: absolute;
            left: 49.5%;
            top: 178px;
        }

        .baby-image-container {
            position: absolute;
            display: none;
            text-align: center;
            animation: popUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-top: 40px;
        }

        .baby-image-container img {
            width: 240px;
            height: 240px;
            border-radius: 50%;
            border: 8px solid white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            object-fit: cover;
        }

        .result-text {
            margin-top: 25px;
            font-size: 2rem;
            color: #2196f3;
            font-weight: 800;
        }

        @keyframes popOut {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2.5); opacity: 0; }
        }

        @keyframes popUp {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .popping { animation: popOut 0.2s forwards; }

        .parent-image-wrapper {
            width: 400px;
            padding-top: 90px;
        }
    </style>
</head>
<body>

<div class="instruction" id="babyName"></div>
<div class="instruction" id="msg">í’ì„ ì„ ì—¬ëŸ¬ ë²ˆ í´ë¦­í•´ ë³´ì„¸ìš”! ğŸ‘¶</div>

<div class="reveal-container">
    <div class="balloon-wrapper" id="balloonWrapper">
        <div class="balloon"></div>
        <div id="ballonString" class="string"></div>
    </div>

    <div id="parentImageContainer">
        <img src="./parent.png" class="parent-image-wrapper" alt="">
    </div>

    <div class="baby-image-container" id="babyContainer">
        <img src="./boy.jpeg" alt="Baby Boy">
        <div class="result-text">ì¶•í•˜í•©ë‹ˆë‹¤! ğŸŠ<br><span id="resultName"></span>ì™•ìë‹˜ì´ì—ìš”! ğŸ‘‘</div>
    </div>
</div>

<script>
    let clicks = 0;
    const balloonWrapper = document.getElementById('balloonWrapper');
    const babyContainer = document.getElementById('babyContainer');
    const babyNameElem = document.getElementById('babyName');
    const parentImageContainer = document.getElementById('parentImageContainer');
    const ballonString = document.getElementById('ballonString');
    const msg = document.getElementById('msg');
    let randInt = Math.floor(Math.random() * 5);
    const maxClicks = 12 + randInt;
    const urlParams = new URLSearchParams(window.location.search);
    const name = urlParams.get('name');

    if(name) {
        let resultNameElem = document.getElementById('resultName');
        babyNameElem.innerText = name + 'ì˜ ì„±ë³„ì€ ë¬´ì—‡ì¼ê¹Œìš”?';
        resultNameElem.innerText = name + 'ëŠ” ';
    }

    balloonWrapper.addEventListener('click', () => {
        if (clicks < maxClicks) {
            clicks++;
            balloonWrapper.style.transform = `scale(${1 + (clicks * 0.03)})`;
            ballonString.style.height = `${160 - (clicks * 5)}px`;

            if (clicks === maxClicks) {
                balloonWrapper.classList.add('popping');

                setTimeout(() => {
                    balloonWrapper.style.display = 'none';
                    babyContainer.style.display = 'block';
                    babyNameElem.style.display = 'none';
                    parentImageContainer.style.display = 'none';
                    msg.innerText = "ë©‹ì§„ ì™•ìë‹˜ì´ ì°¾ì•„ì™”ì–´ìš”!";
                    document.body.style.backgroundColor = "#e3f2fd";
                }, 200);
            }
        }
    });
</script>
</body>
</html>
